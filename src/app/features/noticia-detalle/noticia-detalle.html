<!-- Encabezado del Artículo -->
<section class="article-header">
  <div class="container">
    <nav aria-label="breadcrumb">
      <ol class="breadcrumb article-breadcrumb">
        <li class="breadcrumb-item"><a routerLink="/">Inicio</a></li>
        <li class="breadcrumb-item"><a routerLink="/noticias">Noticias</a></li>
        <li class="breadcrumb-item active" aria-current="page">{{ noticia?.titulo }}</li>
      </ol>
    </nav>
  </div>
</section>

<!-- Loading -->
<section class="article-content" *ngIf="loading">
  <div class="container">
    <div class="text-center py-5">
      <div class="spinner-border text-warning" role="status">
        <span class="visually-hidden">Cargando...</span>
      </div>
      <p class="mt-3">Cargando noticia...</p>
    </div>
  </div>
</section>

<!-- Error -->
<section class="article-content" *ngIf="error && !loading">
  <div class="container">
    <div class="alert alert-danger" role="alert">
      {{ error }}
    </div>
  </div>
</section>

<!-- Contenido del Artículo -->
<section class="article-content" *ngIf="noticia && !loading">
  <div class="container">
    <div class="row">
      <div class="col-lg-8">
        <img [src]="getImagenUrl(noticia)" [alt]="noticia.titulo" class="article-image">
        
        <div class="article-meta">
          <div class="article-date">
            <i class="bi bi-calendar3"></i> {{ formatearFecha(noticia.fecha) }}
          </div>
          <span class="article-category">{{ noticia.categoria }}</span>
        </div>
        
        <h1 class="article-title">{{ noticia.titulo }}</h1>
        
        <div class="article-body" [innerHTML]="noticia.contenido"></div>
        
        <div class="article-share">
          <h4 class="share-title">Compartir esta noticia</h4>
          <div class="share-buttons">
            <button (click)="compartirEnFacebook()" class="share-btn share-facebook" title="Compartir en Facebook">
              <i class="bi bi-facebook"></i>
            </button>
            <button (click)="compartirEnTwitter()" class="share-btn share-twitter" title="Compartir en Twitter/X">
              <i class="bi bi-twitter"></i>
            </button>
            <button (click)="compartirEnWhatsApp()" class="share-btn share-whatsapp" title="Compartir en WhatsApp">
              <i class="bi bi-whatsapp"></i>
            </button>
            <button (click)="compartirEnInstagram()" class="share-btn share-instagram" title="Compartir en Instagram">
              <i class="bi bi-instagram"></i>
            </button>
            <button (click)="copiarEnlace()" class="share-btn share-link" title="Copiar enlace">
              <i class="bi bi-link-45deg"></i>
            </button>
          </div>
        </div>
      </div>
      
      <div class="col-lg-4">
        <div class="related-news">
          <h3 class="related-title">Noticias Relacionadas</h3>
          
          <div class="card related-card mb-4" *ngFor="let relacionada of noticiasRelacionadas">
            <img [src]="getImagenUrl(relacionada)" class="card-img-top" [alt]="relacionada.titulo">
            <div class="card-body related-card-body">
              <div class="related-date">{{ formatearFecha(relacionada.fecha) }}</div>
              <h5 class="related-card-title">{{ relacionada.titulo }}</h5>
              <p class="related-card-text">{{ relacionada.resumen }}</p>
              <a [routerLink]="['/noticia', getNoticiaId(relacionada)]" class="btn btn-related">Leer más</a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Mensaje si no se encuentra la noticia -->
<section class="article-content" *ngIf="!noticia">
  <div class="container">
    <div class="text-center py-5">
      <h2>Noticia no encontrada</h2>
      <p class="text-muted">La noticia que buscas no existe o ha sido eliminada.</p>
      <a routerLink="/noticias" class="btn btn-primary">Volver a Noticias</a>
    </div>
  </div>
</section>

<!-- Notificación de enlace copiado -->
<div class="copy-notification" [class.show]="mostrarNotificacion">
  <i class="bi bi-check-circle-fill"></i>
  <span>¡Enlace copiado al portapapeles!</span>
</div>
